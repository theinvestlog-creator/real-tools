---
import Base from "../../../src/layouts/Base.astro";
import fs from "node:fs";
import path from "node:path";
import { fileURLToPath } from "node:url";

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);
const repoRoot = path.resolve(__dirname, "../../../");
const pRoot = path.join(repoRoot, "public/data/portfolios/sp500_equal");

const meta = JSON.parse(fs.readFileSync(path.join(pRoot, "meta.json"), "utf-8"));
const series = JSON.parse(fs.readFileSync(path.join(pRoot, "series.json"), "utf-8"));
---
<Base title={meta.title}>
  <div class="content-header"><div class="container-fluid">
    <h1 class="m-0">{meta.title}</h1>
    <p class="text-muted">{meta.description}</p>
  </div></div>

  <div class="card">
    <div class="card-body">
      <div id="chart" class="w-100" style="height:360px"></div>
      <script type="application/json" id="series-json">{JSON.stringify(series)}</script>
    </div>
  </div>
</Base>
